#!/usr/bin/env python

Import('env')
Import('env_modules')
env_module = env_modules.Clone()

import generate_builtin_api
generate_builtin_api.generate_api_json()
import duktape.builtin_binding_generator
duktape.builtin_binding_generator.generate_duktape_builtin_bindings()


sources = [
    'register_types.cpp',
    'duktape/src/duktape.c',
    'duktape/duktape_binding_helper.cpp',
    'duktape/duktape_builtin_bindings.cpp',
    'duktape/duktape_builtin_bindings.gen.cpp',
    'ecmascript_library.cpp',
    'ecmascript_language.cpp',
    'ecmascript_instance.cpp',
    'ecmascript.cpp',
]

if env['tools']:
	env_module.add_source_files(env.modules_sources, 'tools/*.cpp')
env_module.Append(CPPPATH=["#modules/ECMAScript"])
env_module.add_source_files(env.modules_sources, sources)
